---
title: En funcionamiento con blogdown
author: Martín ANdrés Macías
date: '2018-03-01'
slug: up-and-running-with-blogdown
categories:
  - R
tags:
  - blogdown
summary: Una guía para comenzar a usar blogdown, GitHub y Netlify
output:
  blogdown::html_page:
    toc: true
    number_sections: true
    toc_depth: 1
---

```{r include = FALSE}
knitr::opts_chunk$set(eval = FALSE, collapse = TRUE, comment = NA, tidy = FALSE)
```


# Lea sobre blogdown

Antes de comenzar, le recomiendo leer lo siguiente:

* [`blogdown`: Creating Websites with R Markdown](https://bookdown.org/yihui/blogdown/) de Yihui Xie y Amber Thomas
* [Making a Website Using `blogdown`, Hugo, and GitHub pages](https://proquestionasker.github.io/blog/Making_Site/) también de Amber Thomas
* [Getting Started with `blogdown`](https://www.znmeb.mobi/2017/05/12/getting-started-with-blogdown/) de M. Edward (Ed) Borasky

También existe este artículo de Eric Nantz, el creador de [R-Podcast](http://r-podcast.org), en la [sección de issues de Github `rbind/support`](https://github.com/rbind/support) que puede ser de ayuda:

* [https://github.com/rbind/support/issues/12](https://github.com/rbind/support/issues/12)


# Advertencias, descargos de responsabilidad, etc.

Incluso con todos los grandiosos recursos que enumeré arriba, ponerme en marcha me llevó algunos intentos, así que este post transmite lo que terminó funcionando para mí. Sin embargo, la distancia andada puede variar, dependiendo del sistema operativo y su enfoque. El mío: soy usuario de macOS, uso R, RStudio y Git (a través de Github)(https://github.com), y la terminal regularmente, por lo que me estoy familizarizando con todo esto. Si no es así para usted, aquí hay unos lugares para comenzar:

* Git: [Happy Git with R](http://happygitwithr.com) de Jenny Bryan et al.
* RStudio: [DataCamp's Working with the RStudio IDE (free)](https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1) de Garrett Grolemund
* Terminal: [The Command Line Murder Mystery](https://github.com/veltman/clmystery) de Noah Veltman, y [The UNIX Workbench](http://seankross.com/the-unix-workbench/) de Sean Kross

También tengo [Xcode](https://developer.apple.com/xcode/) y [Homebrew](https://brew.sh) installed- [probablemente necesitará esto para descargar Hugo](https://bookdown.org/yihui/blogdown/installation.html). Si no tiene ninguno pero está en un mac, este enlace puede ayudar:

* [¿Cómo instalar Xcode, Homebrew, Git, RVM, Ruby & Rails en Mac OS X ](https://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

Para más información sobre cosas de interés que se usan, podría consultar:

* ["Teniendo en cuenta el costo y la amabilidad de los principiantes, actualmente recomendamos Netlify."](https://bookdown.org/yihui/blogdown/deployment.html). 
* ["Si no está familiarizado con nombres de dominios o no quiere aprender más al respecto, una opción para su consideración es un subdominio gratuito `*.rbind.io` ofrecido por RStudio, Inc."](https://bookdown.org/yihui/blogdown/netlify.html). 

# En GitHub

![](/img/posts/2017-06-12-up-and-running-with-blogdown/blogdown-signpost-1.png)


1. Vaya en línea a su cuenta de [GitHub](https://github.com), y cree un nuevo repositorio (Dele check a inicializarlo con un `README` pero no agregue `.gitignore`- de esto se encargará más adelante). Para nombrar su repositorio, considere su futuro plan de publicación:

    * Si va a utilizar [Netlify](https://www.netlify.com) para alojar la página, ¡puede nombrar el repositorio como quiera! 
{{% alert note %}}
Puede ver algunos de los nombres de los repositorios usados por miembros de la organización `rbind` [aquí](https://github.com/rbind/repositories). 
{{% /alert %}}
    * Si quiere alojar su sitio como una [GitHub Page](https://pages.github.com), debería nombrar su repositorio como `yourgithubusername.github.io` (así que el mío hubiera sido `martin.github.io`). Si va por esta ruta, le sugiero que siga las [instrucciones de Amber](https://proquestionasker.github.io/blog/Making_Site/) en vez de este!
    


![Screenshot de arriba: Crear un nuevo repositorio en GitHub](/img/posts/2017-06-12-up-and-running-with-blogdown/github-new-repo.png)

2. Vaya a la página principal de su nuevo repositorio y, debajo del nombre del repositorio, haga clic en el botón verde **Clone or download**.

3. En la sección **Clone with HTTPs**, haga clic en el ícono del portapapeles para copiar el URL clonado de su nuevo repositorio. Pegue este texto en la terminal en la siguiente sección

# En el terminal

![](/img/posts/2017-06-12-up-and-running-with-blogdown/blogdown-signpost-2.png)

Ahora [clone su repositorio remoto](https://help.github.com/articles/cloning-a-repository/) y cree una copia local en su computadora para que pueda sincronizar entre las dos ubicaciones (usando el terminal o su herramienta de línea de comandos alternativa para un computador con Windows)

1. Use `cd` para navegar dentro del directorio donde usted quiere que su repositorio esté

2. Una vez esté ahí, digite: `git clone [paste]`. Entones mi comando sería así:

```
git clone https://github.com/mamaciasq/martin.git
```

Y esto es lo que imprimió en mi ventana de terminal:

```
Cloning into 'martin'...
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
Checking connectivity... done.
```

3. Cierre el terminal, ya terminó ahí.

# En RStudio 

![](/img/posts/2017-06-12-up-and-running-with-blogdown/blogdown-signpost-3.png)



1. Instale `blogdown` desde su consola de RStudio. Si usted ya ha instalado `devtools` como yo lo hice, solo necesita la segunda línea de las que se listan a continuación:

```
if (!requireNamespace("devtools")) install.packages("devtools")
devtools::install_github("rstudio/blogdown")
```

2. Instale Hugo usando la función de ayuda el paquete `blogdown`:

```
blogdown::install_hugo()
# o
library(blogdown)
install_hugo()
```


{{% alert note %}}
Aquí es donde mis instrucciones divergen de las de Ed: afirma que `blogdown` no creará un sitio web en su carpeta raíz porque el archivo `README.md` ya está allí. No encontré que ese fuera el caso, también lo probé con un sitio nuevo. Si una de las formas no funciona para usted, pruebe la otra.
{{% /alert %}}

3. Use los botones del menú de arriba en RStudio para seleccionar `File -> New Project -> Existing Directory`, luego vaya al directorio en su computadora donde esté su repositorio de GitHub y haga click en el botón **Create Project**.

![Screenshot de arriba: Crear un nuevo proyecto en un directorio existente en RStudio](/img/posts/2017-06-12-up-and-running-with-blogdown/r-project-existing-directory.png)

4. Ahora debería estar "dentro" de su proyecto en RStudio. Si está usando git para control de versiones, edite su archivo `*gitignore`. Este archivo debería estar visible en su panel visor de archivos en RStudio. 

This file should be viewable in your file viewer pane in RStudio. A continuación se muestra cómo debería ser: las primeras cuatro líneas estarán automáticamente en este archivo si ha configurado su proyecto de RStudio, pero si planea usar Netlify para implementarlo, debe agregar la línea `public/` ([lea al repescto aquí](https://bookdown.org/yihui/blogdown/version-control.html).)

```
.Rproj.user
.Rhistory
.RData
.Ruserdata
blogdown
.DS_Store # si es un usuario de windows, use Thumbs.db
public/ # si está usando Netlify
```

# Construya su sitio en RStudio

![](/img/posts/2017-06-12-up-and-running-with-blogdown/blogdown-signpost-4.png)

Ahora puede finalmente coonstruir su sitio usando la función `blogdown::new_site()`. Pero **primero** debería al menos pensar en los temas...

## Escogiendo un tema

Hay acerca de 90 [temas de Hugo](https://themes.gohugo.io). Así que volví al libro `blogdown`. Afortunadamente, Yihui y Amber se ofrecieron ["a ahorrar algo de tiempo, enumerando algunos temas a continuación que coinciden con nuestro gusto..."](https://bookdown.org/yihui/blogdown/other-themes.html). Fui a [hugo-academic](https://github.com/gcushen/hugo-academic)! Cualquiera que sea el tema que escoja, necesitará escoger alguno de los tres caminos para hacer su nuevo sitio:

1. Si está feliz con el tema ofrecido por defecto, que es el lithium theme, puede usar: 

```
blogdown::new_site() # el tema por defecto es lithium
```

2. Si desea un tema distinto al predeterminado, puede especificar el tema al mismo tiempo que llama a la función `new_site`:

```
# por ejemplo, cree un sitio nuevo con el tema academic-theme
blogdown::new_site(theme = "gcushen/hugo-academic", theme_example = TRUE)
```

3. Si, por el contrario, desea agregar el tema más tarde (como hice, porque no vi el ejemplo anterior hasta que fue demasiado tarde), puede hacer esto:

```
library(blogdown)
new_site() # el tema por defecto es lithium
# debe dejar de servir para poder usar la consola nuevamente
install_theme("gcushen/hugo-academic", theme_example = TRUE, update_config = TRUE)
```

{{% alert note %}}
Ahora es un buen momento para re-leer sobre `blogdown::serve_site()` y [cómo trabaja _LiveReload_](https://bookdown.org/yihui/blogdown/a-quick-example.html) (y cómo esto bloquea su consola de R por defecto)
{{% /alert %}}

Recomiendo configurar `theme_example = TRUE`- algunos temas no proporcionarán un sitio de ejemplo, pero el tema académico sí y me pareció útil verlo. Siempre puede eliminar el contenido del ejemplo.


## Actualizar opciones de proyecto

En su proyecto en RStudio, vaya a la barra de menús superior de RStudio y seleccione `Tools -> Project Options` y actualice siguiendo las [instrucciones de Yihui y Amber](https://bookdown.org/yihui/blogdown/rstudio-ide.html#fig:project-options).


## Edite sus configuraciones

Lecturas relevantes:

* [capítulo del libro`blogdown` sobre configuración](https://bookdown.org/yihui/blogdown/configuration.html)
* [Detalles adicionales de Amber](https://proquestionasker.github.io/blog/Making_Site/#site-configuration)
* También puede ver [mi archivo de configuración `config.toml`](https://github.com/apreshill/apreshill/blob/master/config.toml)

Ahora, edite el `baseurl` en su archivo `config.toml`. El URL *siempre debería* terminar con un slash `/` . En este punto, probablemente aún no ha publicado su sitio, sin embargo puede verlo son el add-in **Serve Site**, o corriendo la función `blogdown::serve_site`. Para mí funcionarons ambos baseurl que presento a continuación:

```
baseurl = "https://example.com/"
baseurl = "/"
```

{{% alert warning %}}
Asegúrese de que el `baseurl = ` que puso, termine con un slash `/`!
{{% /alert %}}

Continúe y edita todos los demás elementos en el archivo `config.toml` ahora como quiera; ¡así es como personaliza su sitio!

## Addins & flujo de trabajo

Lecturas relevantes:

* [Capítulo del libro`blogdown` sobre RStudio IDE](https://bookdown.org/yihui/blogdown/rstudio-ide.html)


Addins: utilícelos- no necesitará el paquete `blogdown` cargada en la consola si utiliza los Addins. Mi flujo de trabajo en RStudio en este momento (una vez más, solo lo visualizo localmente porque aún no lo hemos publicado) funciona mejor así:

1. Abra el proyecto de RStudio para el sitio
2. Use el complemento **Serve Site** (solo una vez debido a la magia de *LiveReload*)
3. Vea el sitio en el panel del visor de RStudio y ábralo en una nueva ventana del navegador mientras trabaja
3. Seleccione los archivos existentes para editar usando el panel de archivos en RStudio
4. Después de hacer cambios, haga clic en el botón guardar (¡no `knit`!) - la consola se volverá a cargar, el panel del visor se actualizará, y si presiona actualizar en el navegador, su vista local también se actualizará
5. Cuando esté satisfecho con los cambios, agregue / haga commit / haga push de los cambios a GitHub

Tener `blogdown :: serve_site` ejecutando localmente con *LiveReload* es especialmente útil ya que puede ver de inmediato si se equivocó por completo. Por ejemplo, al editar mi archivo `about.md`, este error apareció en mi consola después de hacer un cambio y pude corregir el error de inmediato:

```
Started building sites ...
ERROR 2017/06/08 16:22:34 failed to parse page metadata for home/about.md: (18, 6): missing comma
Error: Error building site: Errors reading pages: Error: failed to parse page metadata for home/about.md: (18, 6): missing comma for about.md
```

El flujo de trabajo anterior solo sirve para editar archivos o publicaciones existentes, pero no para **crear publicaciones nuevas**. Para eso, siga leyendo...



## Publicación

Lecturas relevantes:

* [Capítulo del libro `blogdown` sobre RStudio IDE](https://bookdown.org/yihui/blogdown/rstudio-ide.html)
* [Capítulo del libro `blogdown` sobre formatos de salida](https://bookdown.org/yihui/blogdown/output-format.html): sobre posts .md versus .Rmd
* [Detalles adicionales de Amber](https://proquestionasker.github.io/blog/Making_Site/#adding-a-blog-post-or-portfolio-piece) sobre adición de blog post

Línea de fondo:

Use el addin **New Post**. Pero necesita la consola para hacer esto, por lo que debe detener `blogdown :: serve_site` haciendo clic en el botón rojo **Stop** primero. El addin es una interfaz brillante que ejecuta este código en la consola: `blogdown ::: new_post_addin ()`. Entonces, su consola necesita estar desbloqueada para que se ejecute. También necesita estar "dentro" de su proyecto de RStudio o no funcionará.

### Draft posts

Relevant reading:

* [`blogdown` book chapter on building a website for local preview](https://bookdown.org/yihui/blogdown/local-preview.html)

Whether you do a markdown or R Markdown post (see below), you should know that in the YAML front matter of your new file, you can add `draft: TRUE` and you will be able to preview your post using `blogdown::serve_site()`, but conveniently your post will not show up on your deployed site until you set it to false. Because this is a function built into Hugo, all posts (draft or not) will still end up in your GitHub repo though.




### New markdown posts

Pick one of 2 methods:

1. Use the **New Post** addin and with the radio button at the bottom select **Format: Markdown** (recommended)
2. Use the console to author a new `.md` post:

```
blogdown::new_post()
blogdown::new_post(rmd = FALSE) # false is the default!
```

Here are the `?new_post` arguments:

```
new_post(title, kind = "default", open = interactive(), 
    author = getOption("blogdown.author"), categories = NULL, 
    tags = NULL, date = Sys.Date(), file = NULL, slug = NULL, 
    subdir = getOption("blogdown.subdir", "post"), 
    rmd = getOption("blogdown.rmd", FALSE))
```

{{% alert note %}}
Remember to use the **Serve Site** addin again so that you can immediately view your changes with every save using *LiveReload*.
{{% /alert %}}

### New RMarkdown posts

Again, you have your choice of one of 2 methods:

1. Use the **New Post** addin and with the radio button at the bottom select **Format: RMarkdown** (recommended)
2. Use the console to author a new `.Rmd` post:

```
blogdown::new_post(rmd = TRUE) # false is the default!
```


After you edit your `.Rmd` post, in addition to saving the changes in your `.Rmd` file, you *must* use `blogdown::serve_site`- this is how the output `html` file needs to be generated.   

{{% alert warning %}}
Do *not* knit your `.Rmd` posts- use `blogdown::serve_site` instead. If you happen to hit the knit button, just **Serve Site** again to rewrite the `.html` file.
{{% /alert %}}

Ultimately, your [YAML front matter looks something like this](https://bookdown.org/yihui/blogdown/output-format.html#output-format); note that some but not all features of `rmarkdown::html_document` [are supported in `blogdown`](https://bookdown.org/yihui/blogdown/output-format.html#fn15):

```
---
title: "My Awesome Post"
author: "John Doe"
date: "2017-02-14"
output:
  blogdown::html_page:
    toc: true
    toc_depth: 1
    number_sections: true
    fig_width: 6
---
```



{{% alert note %}}
Remember to use the **Serve Site** addin again so that you can immediately view your changes with every save using *LiveReload* and your `.html` file is properly output.
{{% /alert %}}



### Adding images to a post

If you want to include an image that is not a figure created from an R chunk, the [recommended method](https://github.com/rstudio/blogdown/issues/45) is to: 

1. Add the image to your `/static/img/` folder, then 
2. Reference the image using the relative file path as follows:

```
![my-image](/img/my-image.png)
```


# Deploy in Netlify

![](/img/posts/2017-06-12-up-and-running-with-blogdown/blogdown-signpost-5.png)

Deploying in Netlify through GitHub is smooth. Yihui and Amber give some [beginner instructions](https://bookdown.org/yihui/blogdown/deployment.html), but Netlify is so easy, I recommend that you skip dragging your `public` folder in and instead [automate the process through GitHub](https://bookdown.org/yihui/blogdown/netlify.html#netlify).

1. When you are ready to deploy, commit your changes and push to GitHub, then go online to [Netlify](https://www.netlify.com). 
2. Click on the **Sign Up** button and sign up using your existing GitHub account (no need to create another account)
3. Log in, and select: `New site from Git -> Continuous Deployment: GitHub`.
4. From there, Netlify will allow you to select from your existing GitHub repositories. You'll pick the repo you've been working from with `blogdown`, then you'll configure your build. This involves specifying two important things: the build command and the publish directory (this should be `public`).

    * More about the build command from [Netlify](https://www.netlify.com/docs/continuous-deployment/#common-configuration-directives): *"For Hugo hosting, `hugo` will build and deploy with the version 0.17 of `hugo`. You can specify a specific `hugo` release like this: `hugo_0.15`. Currently `0.13`, `0.14`, `0.15`, `0.16`, `0.17`, `0.18` and `0.19` are supported. For version `0.20` and above, you’ll need to create a Build environment variable called `HUGO_VERSION` and set it to the version of your choice."* I opted for the former, and specified `hugo_0.19`. 
    
You can check your `hugo` version in terminal using the command [`hugo version`](https://gohugo.io/overview/quickstart/). This is what my output looked like, so I could run version `0.20` if I wanted to through Netlify, but I went with `0.19` and it works just fine.

```
$ hugo version
Hugo Static Site Generator v0.20.7 darwin/amd64 BuildDate: 2017-05-08T18:37:40-07:00
```





![Screenshot above: Basic build settings in Netlify](/img/posts/2017-06-12-up-and-running-with-blogdown/netlify-build-settings.png)

Netlify will deploy your site and assign you a random subdomain name of the form `random-word-12345.netlify.com`. Mine was particularly unfortunate, with the random word `garbage-collector-janice`. You should know that you can change this; I changed mine to `apreshill.netlify.com`. 


{{% alert note %}}
Anytime you change your subdomain name, you need to update the `baseurl` in your `config.toml` file (so I changed mine to baseurl = "https://apreshill.netlify.com/").
{{% /alert %}}


At this point, you should be up and running with `blogdown`, GitHub, and Netlify, but here are some ideas if you want to go further...

# Going further

## Custom CSS

I like to tinker with default theme settings like colors and fonts. Every Hugo theme is structured a little differently, but if you are interested, you can check out [my custom css](https://github.com/apreshill/apreshill/blob/master/static/css/blue.css) to see how I customized the academic theme, which provides a way to link to a custom CSS file in the `config.toml` file:

```
  # Link custom CSS and JS assets
  #   (relative to /static/css and /static/js respectively)
  custom_css = ["blue.css"]
```

## Formspree

I used [Formspree](https://formspree.io) to make a contact form, which is an online service (managed on [GitHub](https://github.com/formspree/formspree)) that allows you to add an HTML form to your static site. No registration, just use the form and confirm your email address once. I added the following code into [my contact widget](https://github.com/apreshill/apreshill/blob/master/themes/hugo-academic/layouts/partials/widgets/contact.html):

```
<form action="https://formspree.io/your@email.com" method="POST">
  <label for="name">Your name: </label>
  <input type="text" name="name" required="required" placeholder="here"><br>
  <label for="email">Your email: </label>
  <input type="email" name="_replyto" required="required" placeholder="here"><br>
  <label for="message">Your message:</label><br>
  <textarea rows="4" name="message" id="message" required="required" class="form-control" placeholder="I can't wait to read this!"></textarea>
  <input type="hidden" name="_next" value="/html/thanks.html" />
  <input type="submit" value="Send" name="submit" class="btn btn-primary btn-outline">
  <input type="hidden" name="_subject" value="Website message" />
  <input type="text" name="_gotcha" style="display:none" />
</form>
```



## `*.rbind.io` domain names

You may want a different [domain name](https://bookdown.org/yihui/blogdown/domain-name.html) than the one provided by Netlify. I opted for a free subdomain `*.rbind.io` offered by RStudio. To do the same, head over to the [rbind/support GitHub page](https://github.com/rbind/support/issues) and open a new issue. All you need to do is let them know what your Netlify subdomain name is (`*.netlify.com`), and what you want your subdomain name to be (`*.rbind.io`). The [awesome `rbind` support team](https://support.rbind.io) will help you take it from there! 

{{% alert note %}}
Again, you will need to update the `baseurl` in your `config.toml` file to reflect your new rbind subdomain name (so mine is baseurl = "https://alison.rbind.io/").
{{% /alert %}}


![](/img/posts/2017-06-12-up-and-running-with-blogdown/rbind.png)

## Have fun!

Lastly, don't forget to just have fun with it. Happy `blogdown`ing!

<iframe src="https://giphy.com/embed/13Y6LAZJqRspI4" width="480" height="357" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/dancing-seinfeld-elaine-benes-13Y6LAZJqRspI4">via GIPHY</a></p>